{% extends "COMAdminBundle::admin.html.twig" %}

{% block title %}
  edit Contact {{ contact.id }}
{% endblock %}

{% block body_header %}
	<div class="bc">
		<span class="bc1"><a href="{{ path('com_admin_school') }}"><img src="{{ asset('assets/image/sl_icon.png') }}" style="width:14px; height:auto" /> <span>{{ 'Schools' | trans }}</span></a> </span> 
		<span class="dd">
			<span href="#" class="dd_src">
				<span class="bcdd"></span>
			</span>
			{{ include("COMAdminBundle:school:include/school_principal_action.html.twig") }}
		</span> 
		<span class="bc1"><a href="{{ path('com_admin_school_edit', {'id': school.id}) }}">{{ school.name }}</a></span>
		<span class="dd">
			<span href="#" class="dd_src">
				<span class="bcdd"></span>
			</span>
			{{ include("COMAdminBundle:school:include/school_other_action.html.twig") }}
		</span> 
		<span class="bc1"><a href="{{ path('com_admin_school_contact', {'school_id': school.id}) }}"><span>{{ 'Contacts' | trans }}</span></a> </span>
		<span class="dd">
			<span href="#" class="dd_src">
				<span class="bcdd"></span>
			</span>
			<span class="dd_target dd_tdfault">
				<a class="link dd_item" href="{{ path('com_admin_school_contact_add', {'school_id': school.id}) }}">
					<span class="icon"><img src="{{ asset('assets/image/add_icon.png') }}" /></span><span class="label">{{ 'new contact' | trans }}</span>
				</a>
			</span>
		</span> 
		<span class="bc1"><a href="{{ path('com_admin_school_contact_edit', {'contact_id': contact.id}) }}">{{ contact.address }}</a></span>
	</div>
	<div style="padding:8px; float:right">
		<div style="float:left">
			<span class="dd" style="display:inline-block;">
				<span href="#" class="dd_src" style="cursor:pointer">
					Autres actions
				</span>
				{{ include("COMAdminBundle:school:include/school_other_action.html.twig") }}
			</span> 
		</div>
	</div>
{% endblock %}

{% block content_body %}
	<div style="">
		<div style="float:left; height: 86px;margin:5px">
			{# twig extension #}
			{% set logo=schoolLogo(school) %}
			{% if logo != "default.jpeg" %}
				{% set pathtologo='uploads/images/school/logo/'~logo %}
			{% else %}
				{% set pathtologo='default/images/school/logo/'~logo %}
			{% endif %}
			<img id="school_logo" style="width: 80px; height: 80px" src="{{ pathtologo | imagine_filter('80x80') }}" alt="img sl" />
		</div>
		<div style="margin-left: 90px;">
			<div>
				<table>
					<tr>
						<td>Name</td>
						<td>:</td>
						<td style="padding:5px"><span id="sl_view_name">{{ school.name }}</span></td>
					</tr>
					<tr>
						<td>ShortName</td>
						<td>:</td>
						<td style="padding:5px"><span id="sl_view_shortname">{{ school.shortName }}</span></td>
					</tr>
					<tr>
						<td>Slug</td>
						<td>:</td>
						<td style="padding:5px"><span id="sl_view_slug">{{ school.slug }}</span></td>
					</tr>
				</table>
			</div>
		</div>
		<div class="both"></div>
	</div>
	
	<div style="background:#ddd; padding: 5px; margin:5px; border:1px solid #bbb">
		Edit contact {{ contact.id }}
	</div>
	
	<div style="">
		<div style="">
			<div style="padding:5px">
				<div class="bloc_editable">
					<div class="bloc_view">
						<table>
							<tr>
								<td>address</td>
								<td>:</td>
								<td style="padding:5px"><span id="sl_contact_view_address">{{ contact.address }}</span></td>
							</tr>
							<tr>
								<td>Email</td>
								<td>:</td>
								<td style="padding:5px"><span id="sl_contact_view_email">{{ contact.email }}</span></td>
							</tr>
							<tr>
								<td>Phone</td>
								<td>:</td>
								<td style="padding:5px"><span id="sl_contact_view_phone">{{ contact.phone }}</span></td>
							</tr>
							<tr>
								<td>website</td>
								<td>:</td>
								<td style="padding:5px"><span id="sl_contact_view_website">{{ contact.website }}</span></td>
							</tr>
							<tr>
								<td>latitude</td>
								<td>:</td>
								<td style="padding:5px"><span id="sl_contact_view_latitude">{{ contact.latitude }}</span></td>
							</tr>
							<tr>
								<td>longitude</td>
								<td>:</td>
								<td style="padding:5px"><span id="sl_contact_view_longitude">{{ contact.longitude }}</span></td>
							</tr>
						</table>
					</div>
					<div class="bloc_edit" style="display:none">
						<table>
							<tr>
								<td>address</td>
								<td>:</td>
								<td style="padding:5px"><input type="text" id="sl_contact_input_address" class="default_input" value="{{ contact.address }}" /></td>
							</tr>
							<tr>
								<td>Email</td>
								<td>:</td>
								<td style="padding:5px"><input type="text" id="sl_contact_input_email" class="default_input" value="{{ contact.email }}" /></td>
							</tr>
							<tr>
								<td>Phone</td>
								<td>:</td>
								<td style="padding:5px"><input type="text" id="sl_contact_input_phone" class="default_input" value="{{ contact.phone }}" /></td>
							</tr>
							<tr>
								<td>website</td>
								<td>:</td>
								<td style="padding:5px"><input type="text" id="sl_contact_input_website" class="default_input" value="{{ contact.website }}" /></td>
							</tr>
							<tr>
								<td>latitude</td>
								<td>:</td>
								<td style="padding:5px"><input type="text" id="sl_contact_input_latitude" class="default_input" value="{{ contact.latitude }}" /></td>
							</tr>
							<tr>
								<td>longitude</td>
								<td>:</td>
								<td style="padding:5px"><input type="text" id="sl_contact_input_longitude" class="default_input" value="{{ contact.longitude }}" /></td>
							</tr>
						</table>
					</div>
					<div class="separator"></div>
					<div class="bloc_action" style="margin:5px">
						<span class="btn_edit standar_button">Modifier</span> 
						<span class="btn_save standar_button" id="btn_save_sl_contact_common" data-target="{{ path('com_admin_school_contact_edit_common', {'contact_id': contact.id}) }}" style="display:none">Enregistrer</span>
						<span class="btn_reset standar_button" style="display:none">Annuler</span> 
						<span class="btn_loading" style="display:none;padding:5px;border:1px solid transparent;margin: 0px 5px 0px 0px;"><img src="{{ asset('assets/image/load.gif') }}" />Chargement...</span> 
					</div>
				</div>
			</div>
			<div class="both"></div>
		</div>
		
		{# twig extension #}
		{% set locales = getLocales() %}
		
		<div id="a_content_tab">
			<div class="a_content_tab_header">
				<div class="a_content_tab_header_content">
					{% for locale in locales %}
						<div class="a_content_tab_header_item{% if locale.locale == 'fr' %} selected{% endif %}" id="tab_{{ locale.locale }}">
							<div class="a_content_tab_header_item_text">
								{{ locale.label | trans }}
							</div>
						</div>
					{% endfor %}
				</div>
				<div class="a_content_tab_header_sep">
					<div class="a_content_tab_header_sep_slide">
					</div>
				</div>
			</div>
			<div class="a_content_tab_content">
				{% for locale in locales %}
					{# twig extension #}
					{% set schoolContactTranslate = getSchoolContactTranslate(contact, locale) %}
					<div class="a_content_tab_content_item{% if locale.locale == 'fr' %} selected{% else %} not_selected{% endif %}" id="content_tab_{{ locale.locale }}" style="">
						<div class="bloc_editable">
							<div class="bloc_view">
								<div style="">
									<div style="margin: 5px 0;">
										Description :
									</div>
									<div id="" class="sl_contactt_view_description" style="padding:5px;background:#fff; border-radius:4px;border:1px solid #eee">
										{% if schoolContactTranslate is not null %}
											{{ schoolContactTranslate.description | raw }}
										{% else %}
											NAN
										{% endif %}
									</div>
								</div>
							</div>
							<div class="bloc_edit" style="display:none">
								<div style="">
									<div style="margin: 5px 0;">
										Description :
									</div>
									<div>
										<textarea id="" class="sl_contactt_input_description default_textarea">{% if schoolContactTranslate is not null %}{{ schoolContactTranslate.description | raw }}{% else %}{% endif %}</textarea>
									</div>
								</div>
							</div>
							<div class="separator"></div>
							<div class="bloc_action" style="margin:5px">
								<span class="btn_edit standar_button">Modifier</span> 
								<span class="btn_save_sl_contactt btn_save standar_button" id="" data-target="{{ path('com_admin_school_contact_edit_translate', {'contact_id': contact.id, 'locale':locale.locale}) }}" style="display:none">Enregistrer</span>
								<span class="btn_reset standar_button" style="display:none">Annuler</span> 
								<span class="btn_loading" style="display:none;padding:5px;border:1px solid transparent;margin: 0px 5px 0px 0px;">Chargement...</span> 
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}

{% block body_footer %}
	<div style="padding-top: 8px">
		<span class="toggle_publishState_contact" data-target="{{ path('com_admin_school_field_contact_publication', {'contact_id': contact.id}) }}">
			{% if contact.published %}
				<span class="greenstate" style="display:none"><span class="greenpastille"></span> <span>publish</span></span>
				<span class="redstate"><span class="redpastille"></span> <span>don't publish</span></span>
			{% else %}
				<span class="greenstate"><span class="greenpastille"></span> <span>publish</span></span>
				<span class="redstate" style="display:none"><span class="redpastille"></span> <span>don't publish</span></span>
			{% endif %}
		</span>
	</div> 
{% endblock %}
